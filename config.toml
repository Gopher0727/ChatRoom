[server]
port = "9000"
mode = "release"

[postgres]
host = "127.0.0.1"
port = 5432
user = "gopher"
password = "1900271083"
dbname = "chatroom"
max_idle_conns = 100
max_open_conns = 1000
conn_max_lifetime = 3600 # seconds

[redis]
host = "127.0.0.1"
port = 6379
password = ""
db = 0
pool_size = 100
min_idle_conns = 10

[kafka]
brokers = ["127.0.0.1:9092"]
dlq = "chat.messages.dlq"
group_id = "chat_consumer_group"
consumer_group = "chat-consumer"

[kafka.topics]
topic = "chat_messages"

[kafka.producer]
max_retries = 3
retry_backoff_ms = 100

[kafka.consumer]
max_retries = 3
retry_backoff_ms = 1000

[jwt]
secret = "Uh$VU]j_U67DXc>v4YW>RpI$4K()n:_&.?ZVBGS!ZDV"
expire_hours = 24
refresh_hours = 168                                    # 7 days

[snowflake]
worker_id_bits = 10
sequence_bits = 12
datacenter_id = 1
worker_id = 1

[ratelimit]
register_per_minute = 10
login_per_minute = 20
message_per_minute = 60
api_per_minute = 100

[websocket]
read_buffer_size = 1024
write_buffer_size = 1024
heartbeat_interval = 30  # seconds
connection_timeout = 60  # seconds

[grpc]
port = 9090
max_connection_idle = 300 # seconds
max_connection_age = 600  # seconds

[worker_pool]
size = 1000
queue_size = 100000

[logging]
level = "debug"            # debug, info, warn, error, fatal
format = "json"            # json, text
output = "stdout"          # stdout, file
file_path = "logs/app.log"
